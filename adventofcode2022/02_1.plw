var input1 := '
A Y
B X
C Z
';

var input2 := '
C Z
C Z
A Y
A X
C Z
C Z
A X
C X
A X
C X
A X
A X
A X
A X
C Y
A X
A X
A Y
C Z
C X
C Z
C Y
B Y
C Y
C X
C X
A Z
C Y
A Z
A Z
B X
A Y
A X
B Y
C X
A X
A X
C Z
C Y
B X
A Y
C Z
C Y
C Z
C Z
A X
C Z
C Y
C X
C Z
A X
C Z
A Y
A X
A X
A X
A X
C X
A X
A X
C X
A X
C Y
C Y
A X
C Z
C Y
A X
C Z
C Y
C Z
C Z
B X
C Z
C X
C X
B Z
A X
A X
C Z
C X
C X
A X
A Y
C X
C Y
A X
C Z
A Z
C Z
A Z
A Z
C X
A X
A X
C Z
C Y
C Z
A X
A X
C X
A X
C X
A X
A Z
A Y
C Y
A Y
C Z
A X
A Y
C X
A Z
C Y
C Z
C Z
A Y
C Z
A Z
C Z
A Z
A Z
A X
C X
A Y
A X
C Z
A X
C Z
C Z
A X
C Z
C X
A Z
A X
A Z
A X
C Z
A X
C X
A X
A X
C X
C Z
C Y
C Z
A Y
C Z
C Z
A X
C X
B X
C X
A X
C Y
C Z
C Z
C Z
A Z
C Y
A X
C X
B X
B X
C Y
C X
A X
C X
C X
A Y
C Z
A X
A X
A X
C Z
A X
C Z
C Y
C Z
C X
A X
C Z
A X
C Z
C X
C X
A X
C Z
C Z
C X
A Y
B X
B Z
A Z
C Z
A X
A X
A X
C X
C X
C Y
C Z
A Y
B Z
A X
C X
C X
C X
C Y
C X
A X
A X
A Z
A X
A X
C Z
C Z
C Z
A X
C X
C X
C Y
A X
C Z
A Z
C X
A X
C X
C Z
A X
A X
C Z
C X
C Y
A X
C Y
C Z
A Z
C X
A X
A X
A X
A Z
C X
C X
A X
A X
B X
C Y
C X
C Z
C Y
A X
C X
C Z
C Y
C Y
C X
C Y
B X
C X
C Y
A X
C Z
C Y
A X
A X
C X
A X
A X
A Z
C X
A Z
C X
C X
C X
C Y
A Z
C Z
A X
B X
C X
A X
A Z
C X
C Z
B X
C X
A X
A Y
A Z
C Z
C Z
C X
A Z
C Z
C Z
C X
C Y
C Z
C Z
C X
A Z
C Z
C X
A X
A X
A X
A Z
A Z
C Z
A X
C X
A X
C X
C Z
C X
C X
A X
C X
B Y
A X
B X
A X
C X
C Z
A X
C X
A X
A X
C Z
C X
C X
C X
C Z
A X
B X
A Z
C X
B Z
C Z
B Z
C Z
A Y
A X
B Y
A X
A X
C Z
C X
A X
B X
C X
B Z
C Z
A X
A X
A X
A X
A X
A X
A X
C Y
A Y
C X
C Z
C X
C Y
C Z
C X
A X
C Z
A X
A Z
C X
C Z
C Y
A X
C X
C Z
A X
A Y
C X
A X
C Y
A Y
C Y
A Z
C Z
A X
C Z
C Z
A X
C Z
A Z
C X
C Z
B X
C X
A X
A Y
A X
C Z
A Y
A Y
C X
B Z
C X
A X
A X
A X
A X
A X
C X
C Z
A Z
A X
C Y
C Z
A X
A Z
B Z
A Z
A X
C Y
C X
C X
C X
B Z
A X
C Y
A X
A X
A X
C Y
A X
B X
C X
C X
C Z
C Z
A X
C Y
A Z
A X
C X
A X
C X
C X
C Z
A X
C Y
C Y
A X
A Z
A Z
A X
C X
A X
C Y
B X
A X
C Y
C X
B X
C Z
A X
A X
C X
C Z
C Z
C X
C Y
C Y
A X
C Z
C X
C Y
C X
A X
A X
A X
B Y
C X
A X
C X
C X
A X
C Z
C Z
C X
B X
A Y
A Y
C Z
C Y
C X
C Y
B Y
A Z
C X
A X
A Z
A Y
C X
A Z
C Z
C Y
C Z
A X
C X
C Z
C X
C X
A X
C Z
A Z
C X
C Y
C X
A X
A Z
C Z
C X
A Z
B Z
C Y
B X
A Y
B X
B Y
A Y
A X
A Z
C X
C X
A X
C X
C Z
C Y
A Z
A X
C Z
A X
A X
A Z
A X
A X
C Z
A X
C X
A X
A X
A Y
C Z
A X
C Z
A Z
A X
A X
A Y
C Z
A Z
A Z
A X
C X
A X
A X
C Z
C X
C X
C X
C Y
C X
A X
B X
B X
C Z
C Z
C Z
C X
B Y
A Y
B X
B X
C X
C X
C X
A X
C Y
A Z
A X
C X
A X
A X
A X
B X
C Y
A X
C Z
A X
C X
A X
C Z
C X
A X
A Z
A X
A X
A X
C Z
A Y
B X
A X
B X
C Z
A X
A X
C Y
C Z
C Z
A X
C X
A X
A X
A X
A X
A X
C X
A X
C Y
C X
B X
A X
C Y
C Z
A X
A X
C X
A Z
A X
A Z
A X
C Z
A X
B X
C X
A X
C X
A X
C Y
C Z
A X
C Z
C Z
C X
B X
C Z
A X
A Z
C X
A X
C X
C Z
C Z
C Y
C Z
A X
C X
C Z
A Z
C Z
A Z
C X
C Z
A X
A X
B X
A Z
B X
C Y
C Z
C X
A X
C Z
C Z
C Z
B X
C X
C X
A Z
A X
C Y
A X
B Z
B X
A X
C Y
B X
C Z
C Y
C Z
A X
C Y
A X
A X
A Z
A X
A X
C X
C Y
C Z
C Z
C Y
B Y
C Z
A X
A X
C X
C X
C X
A X
C Y
A X
A Y
A X
C X
C Y
C Y
B X
A X
C Z
A X
C Z
C X
A X
A Z
C X
C Y
A X
A Z
A Z
C Y
A X
C Z
C Z
A X
A Z
B X
A X
C Y
C X
B Z
C Z
A X
C Y
A X
C Y
A Z
A X
C X
C Y
B X
A X
B X
A X
A X
B Y
A X
A X
C X
A X
C X
A X
A X
C Y
A X
C Z
C Z
A Z
C X
A Z
C Y
C Z
C X
A X
C Z
A X
C Y
A X
A Z
C Y
C X
C X
C Z
B X
A X
A X
A Z
C Z
C X
A X
C X
A Z
A Z
A X
C X
C Z
B Z
C X
C X
A X
A X
A X
C Y
C X
A X
C Z
A X
B Y
A X
A X
C X
B X
A X
C X
B Y
A Z
C X
C X
A X
A X
A X
C Y
C X
A Z
C X
A X
C Z
C Z
C Y
A X
A X
B Z
C Y
C Z
A X
C Z
A X
C Z
B X
A Z
A Z
C X
A X
C Z
C X
A X
A X
C X
C Z
C X
A X
C X
A X
A X
C Z
C X
A X
A X
A X
A X
C Y
A X
C X
C Z
C Y
C Z
C X
C Z
A X
C X
C Z
C Z
C Z
B X
C X
A Z
A Z
A X
C X
C Z
B Z
C Z
C Z
A Y
A Y
C X
A X
A X
A Z
A X
A Y
A Z
A X
A X
C Z
C Z
A Y
A X
B X
A X
A X
C X
A X
A Z
C Z
C X
C Z
C X
A Z
B X
A X
A X
C X
B Y
A X
C Z
A X
A Y
A Z
A X
C Z
A Z
B X
C Z
C Y
A X
C Y
A X
C X
C X
C X
A X
C X
C Z
C Y
A Z
C X
C Y
A X
A X
C Z
A X
C X
C X
A X
A X
A Z
C X
C Z
A Z
A Z
A X
B X
B X
A X
C Z
A Z
C Z
C X
C Z
B X
C X
C X
B Z
A X
A Z
B Z
B Z
C X
A Z
A X
A Y
C X
A X
C Z
A X
C X
A X
C Z
C X
C X
C X
C Z
B Z
A X
A X
A X
C Z
A X
A X
C X
B Z
C X
C X
A X
B Y
C X
C X
C X
A X
C X
A Z
C Y
B Z
A X
C Z
C Z
C Z
C Z
A Y
C Z
A X
A X
C X
C X
A X
C X
A Z
A X
C Z
C X
A X
C Z
C X
C Z
B Z
A X
C Y
C Z
A X
A X
C Y
A Z
C X
C Z
C Z
C Y
C Z
A X
C X
A X
A X
C X
A X
C Z
A X
A Z
A X
C Z
C Z
B X
C Z
A Y
A Z
A X
C Y
C X
C Y
A X
A Z
A X
A X
A X
C X
B X
C X
A Y
A Y
C Z
A X
A X
A Z
C X
A X
A Z
C Z
C Z
C X
C X
A X
A X
C Z
A X
C Z
C Z
B Z
A X
A X
C Z
A X
C Z
C Y
C X
A X
A Z
A X
A X
A X
C Y
C Z
A X
C Y
C Z
C Z
A X
A Z
A X
C Z
C Y
C Z
C Y
A X
C X
A X
A X
A X
C X
A X
A X
C Y
C X
A X
C X
A Z
A X
C Z
C X
B Z
C Z
A X
C Y
C Z
C X
A X
A X
B Y
A X
B X
C X
A X
A X
C X
C Y
A X
A X
A X
C X
C Z
A X
B X
C Y
C Y
A X
C Y
C X
A X
C X
A X
A X
A X
C X
C X
B Z
A X
C X
A X
C Z
A X
C Y
A X
C Z
C Z
C Y
A X
A Z
A X
C X
C Z
A X
C Z
C X
C Z
A X
C Y
A X
C Z
C Y
C X
A X
A Y
B X
A X
A Y
A X
A X
A X
A X
C Z
C Y
B X
A X
C X
A X
C X
A X
A Y
A X
C Z
A Z
C X
A X
A X
A X
C Z
C Z
C Y
C X
A X
C X
C Y
A Z
C X
A X
C Y
C Z
C Z
A X
A X
C Z
C Z
C X
C X
C X
C Z
C Y
C X
B Z
C Z
A X
C Z
A X
A X
C X
C X
C Y
A Y
A X
C X
A X
C X
C X
A X
A X
A Y
C Z
C Y
A X
A X
A X
A X
C X
C Y
A X
A Y
A X
A X
C X
A Z
C Z
C Z
C Z
C Z
A X
C Z
C X
C X
B X
C X
C Z
C X
A Z
C Z
B X
B Z
C Y
A X
B X
A X
A X
A X
C X
C X
A X
C Y
A X
C Y
B Y
C Y
A X
C X
C Y
C Z
C X
A X
A X
C X
B X
C Z
C X
A X
A Z
A X
C Z
C X
B X
A Z
A X
B Z
C Z
A X
C Y
A X
C Z
B X
C X
C X
C Y
A X
A X
A X
C Z
C X
B Z
C Z
B X
B Z
A X
A Z
A X
C X
C X
C Z
C X
C X
B Y
A X
A X
A X
A X
A X
A X
C X
A Z
A Z
C X
C X
A X
B Y
C X
C X
A Z
A X
B X
A X
C X
C Z
C Y
C Z
C Z
B X
C Y
C X
A X
A X
C X
C Y
C Z
A X
C X
A X
B Z
A X
C Y
C X
C X
A X
C Z
C Z
A X
C X
C X
C X
A X
A Z
C X
A X
C Z
A X
C Z
C Z
A X
C Z
A Z
C X
A X
A X
C Z
A X
A X
A X
C X
A X
A X
C Z
C X
C Y
B X
C X
C Y
C X
A X
A Y
A X
A X
A Z
C Z
A X
C X
C X
C X
C X
B Z
A X
B Y
C X
C X
C Y
C X
C Z
C Z
A X
C X
A X
C X
A Z
C Y
B X
A X
C X
C Z
C Y
B X
C Y
A X
C X
A X
A X
A Z
A X
B X
C X
A X
A Y
A X
C X
C Z
A Z
A X
A X
C Z
A X
C X
A X
C X
A X
C Z
C Y
A X
C X
A X
C Z
A Y
B X
C Z
C Z
A X
A X
A Y
A Z
A X
C X
C Y
C Z
A X
C Z
C Z
B X
A X
A X
A X
C Y
A Z
C Z
C Z
A Z
A X
A X
B X
C X
B X
A X
C Z
A Y
C Z
A X
C X
C Z
C X
A X
C X
A X
A X
C Z
A Z
C X
C X
B Z
C Z
A Y
A X
C X
C Z
A X
C Z
C X
C Y
C X
A Y
C Z
C Z
A X
A X
A X
C Z
C Y
C Z
A X
C Z
A X
C X
A X
A Y
A X
A Z
A X
A Y
A X
A X
A X
A Z
A X
C Z
C Z
C Z
C X
A X
A Z
C X
C Z
A X
C X
C Y
A X
C X
A X
C Y
A X
A X
C Z
C X
A X
C Z
A X
A X
C Z
C X
C Z
C Y
A Y
C Z
C X
B X
A X
A X
A Z
A X
A X
C X
C Z
A X
C X
A Z
B X
A Z
C Z
C Z
A X
B X
A X
A Y
A X
A X
C Z
A X
C Y
C Z
C Y
A X
A X
A X
A X
B Z
B Z
A X
C X
C X
A X
C X
C Y
B X
C Y
B X
A X
B Z
C Z
A X
A X
C X
A Z
A X
C X
C Z
A X
C X
C X
C X
C Z
C Y
A X
A X
A X
C Z
C Z
C X
C Z
B X
A X
C Z
C Z
C Y
A X
A X
C Z
A Z
C X
C Z
C Y
C Z
C Z
A X
C Z
C Y
C X
B X
C Z
A Y
C Z
C X
C X
A X
A X
A X
C Z
B Z
A X
A Z
B X
A Z
A Z
C Z
C Z
C X
C Y
C Y
C Z
A Z
C Y
C X
C Y
A Z
B Y
A X
C Y
A X
A X
A Z
C Z
C Z
C Z
C X
C X
C Z
C Z
A X
C X
A Y
A Y
A X
B Z
A X
C X
A X
C X
A X
A X
A X
C X
C Y
C Z
C Z
A X
C Z
A X
C X
C X
C Z
A X
A X
A X
C X
C Z
A X
A X
A X
A X
C Z
B Y
A X
A X
A X
C Y
A X
A X
A Z
C X
A Z
C Z
A Z
C Z
A X
A Z
A X
A X
A X
A X
A Y
C X
C Z
A X
A Z
C X
A Y
C Z
C Y
A X
B X
A Y
C X
A X
C Z
C X
A X
C Z
C X
A X
C X
C X
C Z
A X
A Y
C Y
C Y
A X
A X
A X
A X
A X
C X
A Y
C Z
C Z
C Y
A X
C Z
C Z
A X
C X
C X
C Y
A X
A X
C X
C X
A Z
A X
C Z
A X
C Z
A X
B X
A Z
B X
C Z
C Z
C X
A X
A Z
C X
A X
A X
C X
C Y
C Z
C X
C X
A X
C Z
C Z
C X
B X
C Z
A X
B X
A Z
C X
A Z
A X
A X
C X
A X
C Z
A X
A X
C Z
C Z
C Z
A X
C X
A Y
C Y
A X
A X
A X
A X
C X
C Z
A X
A X
A X
C X
C Z
A X
C Z
A X
A Y
C Y
C X
C X
A X
A X
A X
A Z
A X
C Z
A X
C Y
B Z
B X
A X
C X
C Z
A X
A X
C Z
B X
B X
C X
C Y
C X
B X
A X
A X
C X
A Z
A X
C X
C X
C X
A X
C Z
A Y
A X
C Y
A X
A X
C Z
A Z
A Z
C X
C X
C Y
C Y
C X
C X
C Z
A X
C X
A X
A X
A X
A X
C Y
C Z
A X
C Z
C X
C X
A X
A X
A Z
C Y
C X
A X
C X
A X
A Z
A X
A Z
A X
A X
A X
C X
A Z
A X
C X
C Y
A Z
A X
B X
C X
C Y
C Z
C X
C Y
C X
C X
A X
C Y
B X
A Z
C Z
B Z
C X
A X
C Z
A X
C X
A X
A X
A X
C Z
C Y
B Z
A X
C X
A Y
C Z
A X
A X
A Z
A Z
A Y
C X
C Z
C X
A Z
C X
C Z
C X
B X
A X
C Z
A X
A X
C Z
A Z
C X
C Y
C X
C X
C Y
A X
A X
C X
A Z
C X
C Z
C X
A Z
A X
A Y
A X
A X
B Z
C Z
C Z
A Y
C X
A X
B X
A X
A Z
C Y
C Z
C X
C Z
C Z
C X
C X
A X
C X
A Z
C Z
C Z
C Z
C Y
C X
A X
C Z
A Z
C Z
C Z
A X
C X
A X
C Z
A X
B X
A X
C Z
C X
C X
A X
C Y
A X
C Z
B X
C Z
C X
A X
C X
C X
C Z
A X
A X
C Z
C Z
C X
C Z
C X
A X
A X
C Z
C X
C X
A X
C Z
A Z
C Z
B X
C X
C Y
C X
C Z
A X
B X
C Z
A X
C Z
A Z
C Z
C X
A X
C Z
C Z
A X
A X
C Z
A X
C Y
A Z
C X
C Z
A X
B Z
B X
A X
A Z
A X
A Z
A X
A X
C Y
A X
C Y
C X
C Y
C Y
C X
A X
A Z
A Z
C X
C Z
B X
A X
C Z
A Z
C X
C Z
C Y
A X
A X
C Z
C Z
C Y
A Z
C Z
C Y
A X
C X
A X
C X
C Z
A Z
B Z
A X
A X
A X
C X
C X
A Y
A Z
C X
C Z
A X
B X
A X
A X
C X
C X
B X
A X
B X
C Z
A Z
C Z
A X
C X
C Z
C Y
A Y
A Z
C Y
C Z
A X
A X
C X
A X
C Z
C Y
A X
C Z
A X
A X
B X
A X
A Z
C X
C Y
A Z
C Z
A X
A Z
C X
C Z
C X
C Z
A X
A X
A X
C X
A X
C Z
C X
C X
C X
C X
A X
C X
B Y
A Z
A Z
C Z
C X
A Y
C X
A X
C X
C Z
B Z
C Z
B X
A X
A Z
A X
C X
A X
C Z
C Z
C Z
A X
C Z
A X
C Z
C X
C X
C X
B X
A X
A X
B X
C X
A X
C Z
A Z
C Y
C Z
A Z
B Z
A Z
C Z
C Z
C X
A X
A X
C X
C X
C Y
A Y
A Z
A X
C Z
C Z
C Y
C X
A X
A X
C Y
A Z
C X
C X
C X
A X
C X
C X
A Z
C X
C Y
A Z
C Z
C Y
A Z
C Z
A X
C X
C Y
C X
C X
C Z
C X
C X
C Z
C X
A X
B Y
A X
C X
B Z
C Z
C X
C Z
C Z
A Y
A Y
A X
A Z
C Z
A X
C X
C Z
A Z
A X
A X
A X
B X
A X
B Z
C X
A X
C X
A Z
C X
A X
C Y
A X
C X
C Y
A Z
C Z
C Z
B X
A X
C X
A X
C X
C Y
A X
C Y
A X
B X
C Y
A X
A X
C X
A X
B Y
C Y
C Y
C Y
C X
A Y
C X
C Z
A X
A Z
A X
A X
C Z
A Z
A Z
C X
A X
A X
B X
C X
C Y
C X
B Z
A X
C X
C Y
C X
C Z
C Y
A X
C X
A X
A X
A Y
C Z
C Z
C Z
A X
A X
A Z
A X
A X
A Z
A X
C Y
C Y
A X
A X
A Z
C X
A X
C Z
A Z
C Z
C Y
C Z
A X
C Z
C X
C Z
A X
C Y
C Y
B X
A X
A Z
C X
A X
A X
C Z
A X
C X
C Z
A Z
A Y
A Y
A X
C X
A Y
A X
A X
B Z
A X
C X
C X
C X
A X
C X
C Z
C Z
A Z
C X
C X
C Y
A X
C X
A X
A X
C Y
C X
A X
C Y
C X
C X
A Y
C Z
C X
C X
C Y
C Z
A Y
A X
C Z
C Z
C Z
C X
C Z
A X
A X
A Z
A X
C Y
C X
C Z
A X
A X
C Z
A X
C X
A X
A Y
C X
';

type rock null;
type paper null;
type scissors null;

type shape rock | paper | scissors;

const ROCK := null as rock as shape;
const PAPER := null as paper as shape;
const SCISSORS := null as scissors as shape;

function parse_input(input text) [(o shape, m shape)] begin
	var lines := split(input, text(10 as char));
	lines := lines[1 .. last_index(lines) - 1];
	var result := [] as [(o shape, m shape)];
	for line in lines loop
		var o := char_at(line, 0);
		var m := char_at(line, 2);
		result := result || [(
			case o when 'A' as char then ROCK when 'B' as char then PAPER else SCISSORS end,
			case m when 'X' as char then ROCK when 'Y' as char then PAPER else SCISSORS end
		)];
	end loop;
	return result;
end parse_input;

function compute_score(input [(o shape, m shape)]) integer begin
	var score := 0;
	for i in input loop
		var (o, m) := i;
		score := score +
			case
				when o = m then 3
				when    (m = ROCK     and o = SCISSORS)
					 or (m = PAPER    and o = ROCK) 
					 or (m = SCISSORS and o = PAPER) then 6
				else 0
			end;
		score := score +
			kindof m
				when rock a then 1
				when paper a then 2
				when scissors a then 3
			end;
	end loop;
	return score;
end compute_score;

function solve(input text) integer begin
	var begin_time := now();
	var parsed := parse_input(input);
	var score := compute_score(parsed);
	print('score ' || text(score) || ', elapsed ' || text(now() - begin_time) || ' ms');
	return score;
end solve;

if solve(input1) = 15 then
	print('Correct');
else
	print('Wrong');
end if;

if solve(input2) = 12156 then
	print('Correct');
else
	print('Wrong');
end if;

